<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>FOOBLITZ â€“ Payment</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <link rel="stylesheet" href="style.css">

  <style>
    .wrap{max-width:1100px;margin:30px auto;padding:0 16px}
    .box{background:#fff;padding:20px;border-radius:12px;box-shadow:0 6px 18px rgba(0,0,0,.08);margin-bottom:24px}
    .row{display:flex;gap:20px;flex-wrap:wrap}
    .col{flex:1;min-width:260px}
    .btn{width:100%;padding:14px;font-size:16px;border-radius:10px;border:none;cursor:pointer}
    .primary{background:#0b74de;color:#fff}
    .success{background:#25d366;color:#fff}
    .btn:disabled{opacity:.6}
    .qr img{width:220px;height:220px}
    .total{font-size:20px;font-weight:700;margin-top:10px}
    .muted{color:#666;font-size:14px}
  </style>
</head>

<body>

<header class="site-header">
  <div class="container header-inner">
    <div class="brand">
      <h1>FOOBLITZ</h1>
      <p class="tag">Official & Replica Jerseys</p>
    </div>
    <nav class="main-nav">
      <a href="index.html">Home</a>
      <a href="products.html">Products</a>
      <a href="payment.html">Payment</a>
      <a href="contact.html">Contact</a>
    </nav>
  </div>
</header>

<div class="wrap">

  <h2>Checkout / Payment</h2>

  <!-- ORDER SUMMARY -->
  <div class="box">
    <h3>Your Order</h3>
    <div id="items"></div>
    <div class="total">Total: <span id="total">â‚¹0</span></div>
    <p id="empty" class="muted"></p>
  </div>

  <!-- UPI PAYMENT -->
  <div class="box">
    <h3>Pay using UPI / GPay</h3>
    <p class="muted">Pay via Google Pay / PhonePe / Paytm. Scan QR on desktop.</p>

    <div class="row">
      <div class="col">
        <button id="upiBtn" class="btn primary">Pay with UPI / GPay</button>
      </div>
      <div class="col qr">
        <img id="qr" alt="UPI QR">
        <div class="muted">Scan to Pay</div>
      </div>
    </div>
  </div>

  <!-- WHATSAPP ORDER -->
  <div class="box">
    <h3>Send Order on WhatsApp</h3>
    <p class="muted">After payment, send your order to confirm.</p>
    <button id="waBtn" class="btn success">Confirm & Send Order on WhatsApp</button>
  </div>

</div>

<script>
/* ================= CONFIG (CHANGE THIS) ================= */
const UPI_ID = "robyjaison@oksbi";            // ðŸ”´ YOUR UPI ID
const SHOP_NAME = "FOOBLITZ";
const WHATSAPP = "918848882453";          // ðŸ”´ YOUR WHATSAPP NUMBER (India)

/* ================= LOGIC ================= */
const cart = JSON.parse(localStorage.getItem("fs_cart") || "{}");
const keys = Object.keys(cart);
let total = 0;

const itemsDiv = document.getElementById("items");
const totalEl = document.getElementById("total");
const emptyEl = document.getElementById("empty");

if(keys.length === 0){
  emptyEl.textContent = "Your cart is empty.";
}else{
  keys.forEach(id=>{
    const p = cart[id];
    const line = document.createElement("div");
    line.textContent = `${p.name} Ã— ${p.qty} = â‚¹${p.price * p.qty}`;
    itemsDiv.appendChild(line);
    total += p.price * p.qty;
  });
  totalEl.textContent = "â‚¹" + total;
}

/* ================= UPI ================= */
function upiLink(){
  return `upi://pay?pa=${encodeURIComponent(UPI_ID)}&pn=${encodeURIComponent(SHOP_NAME)}&am=${total}&cu=INR`;
}

document.getElementById("upiBtn").onclick = ()=>{
  if(total <= 0) return;
  window.location.href = upiLink();
};

if(total > 0){
  document.getElementById("qr").src =
    "https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=" +
    encodeURIComponent(upiLink());
}

/* ================= WHATSAPP ================= */
document.getElementById("waBtn").onclick = ()=>{
  if(total <= 0) return;

  let msg = `ðŸ›’ *NEW ORDER â€“ ${SHOP_NAME}*%0A%0A`;
  keys.forEach(id=>{
    const p = cart[id];
    msg += `ðŸ‘• ${p.name}%0AQty: ${p.qty}%0Aâ‚¹${p.price * p.qty}%0A%0A`;
  });
  msg += `ðŸ’° *Total: â‚¹${total}*`;

  window.open(`https://wa.me/${WHATSAPP}?text=${msg}`, "_blank");
  localStorage.removeItem("fs_cart");
};
</script>

</body>
</html>
